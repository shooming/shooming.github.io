{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/Mongo-DB-4","result":{"data":{"markdownRemark":{"id":"e20eee35-e2f1-5cff-84ca-210bf1c8f5be","html":"<h1 id=\"mongodb-document-내용-수정하기\" style=\"position:relative;\"><a href=\"#mongodb-document-%EB%82%B4%EC%9A%A9-%EC%88%98%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"mongodb document 내용 수정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mongoDB Document 내용 수정하기</h1>\n<p>Document은 <code class=\"language-text\">.update()</code>메소드를 사용하면 수정하여 줄 수 있다.</p>\n<h2 id=\"document-수정하기--dbcollection_nameupdate-\" style=\"position:relative;\"><a href=\"#document-%EC%88%98%EC%A0%95%ED%95%98%EA%B8%B0--dbcollection_nameupdate-\" aria-label=\"document 수정하기  dbcollection_nameupdate  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Document 수정하기 ( db.COLLECTION_NAME.update() )</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.collection.update<span class=\"token punctuation\">(</span>\n   <span class=\"token operator\">&lt;</span>query<span class=\"token operator\">></span>,\n   <span class=\"token operator\">&lt;</span>update<span class=\"token operator\">></span>,\n   <span class=\"token punctuation\">{</span>\n     upsert: <span class=\"token operator\">&lt;</span>boolean<span class=\"token operator\">></span>,\n     multi: <span class=\"token operator\">&lt;</span>boolean<span class=\"token operator\">></span>,\n     writeConcern: <span class=\"token operator\">&lt;</span>document<span class=\"token operator\">></span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">update()</code>는 기본적으로 단 하나의 document를 수정하며, filed를 수정하거나 이미 존재하는 document를 대체할 수 있다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Parameter</th>\n<th align=\"center\">Type</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">*query</td>\n<td align=\"center\">document</td>\n<td>업데이트 할 document의 criteria 를 정합니다. find() 메소드 에서 사용하는 query 와 같습니다.</td>\n</tr>\n<tr>\n<td align=\"center\">*update</td>\n<td align=\"center\">document</td>\n<td>document에 적용할 변동사항입니다.</td>\n</tr>\n<tr>\n<td align=\"center\">upsert</td>\n<td align=\"center\">boolean</td>\n<td>Optional. (기본값: false) 이 값이 true 로 설정되면 query한 document가 없을 경우, 새로운 document를 추가합니다.</td>\n</tr>\n<tr>\n<td align=\"center\">multi</td>\n<td align=\"center\">boolean</td>\n<td>Optional. (기본값: false)  이 값이 true 로 설정되면, 여러개의 document 를 수정합니다.</td>\n</tr>\n<tr>\n<td align=\"center\">writeConcern</td>\n<td align=\"center\">document</td>\n<td>Optional.  wtimeout 등 document 업데이트 할 때 필요한 설정값입니다. 기본 writeConcern을 사용하려면 이 파라미터를 생략하세요.</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"특정-field-업데이트\" style=\"position:relative;\"><a href=\"#%ED%8A%B9%EC%A0%95-field-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8\" aria-label=\"특정 field 업데이트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>특정 field 업데이트</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 회사의 지역을 \"강남\"으로 변경한다.</span>\n<span class=\"token operator\">></span> db.company.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"test company\"</span>, <span class=\"token punctuation\">{</span> <span class=\"token variable\">$set</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> location <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"강남\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\nWriteResult<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"nMatched\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>, <span class=\"token string\">\"nUpserted\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span>, <span class=\"token string\">\"nModified\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>특정 field값을 수정할 땐 <code class=\"language-text\">$set</code> 연산자를 사용한다. 이 연자를 사용하여 새로운 field를 추가 할 수 있다.</p>\n<h3 id=\"document를-replace하기\" style=\"position:relative;\"><a href=\"#document%EB%A5%BC-replace%ED%95%98%EA%B8%B0\" aria-label=\"document를 replace하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>document를 replace하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># new company의를 새로운 document로 교체한다.</span>\n<span class=\"token operator\">></span> db.company.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"new company\"</span> <span class=\"token punctuation\">}</span>, <span class=\"token punctuation\">{</span> <span class=\"token string\">\"name\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"new new company\"</span>, <span class=\"token string\">\"location\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"판교\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span>\nWriteResult<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"nMatched\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>, <span class=\"token string\">\"nUpserted\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span>, <span class=\"token string\">\"nModified\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"특정-field-제거하기\" style=\"position:relative;\"><a href=\"#%ED%8A%B9%EC%A0%95-field-%EC%A0%9C%EA%B1%B0%ED%95%98%EA%B8%B0\" aria-label=\"특정 field 제거하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>특정 field 제거하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Founded의 field를 제거한다.</span>\n<span class=\"token operator\">></span> db.company.update<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span>name <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"gogo company\"</span><span class=\"token punctuation\">}</span>, <span class=\"token punctuation\">{</span> <span class=\"token variable\">$unset</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"Founded\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span>\nWriteResult<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"nMatched\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>, <span class=\"token string\">\"nUpserted\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span>, <span class=\"token string\">\"nModified\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"criteria기준에-해당되는-document가-존재하지-않으면-새로-추가하기\" style=\"position:relative;\"><a href=\"#criteria%EA%B8%B0%EC%A4%80%EC%97%90-%ED%95%B4%EB%8B%B9%EB%90%98%EB%8A%94-document%EA%B0%80-%EC%A1%B4%EC%9E%AC%ED%95%98%EC%A7%80-%EC%95%8A%EC%9C%BC%EB%A9%B4-%EC%83%88%EB%A1%9C-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"criteria기준에 해당되는 document가 존재하지 않으면 새로 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>criteria(기준)에 해당되는 document가 존재하지 않으면 새로 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># upsert 옵션 설정하여 haha company가 존재하지 않는다면 새로 추가한다.</span>\n<span class=\"token operator\">></span> db.company.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"haha company\"</span> <span class=\"token punctuation\">}</span>, <span class=\"token punctuation\">{</span> name <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"haha company\"</span>, <span class=\"token string\">\"location\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"역삼\"</span><span class=\"token punctuation\">}</span>, <span class=\"token punctuation\">{</span> upsert <span class=\"token builtin class-name\">:</span> true<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"여러-document의-특정-field를-수정하기\" style=\"position:relative;\"><a href=\"#%EC%97%AC%EB%9F%AC-document%EC%9D%98-%ED%8A%B9%EC%A0%95-field%EB%A5%BC-%EC%88%98%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"여러 document의 특정 field를 수정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>여러 document의 특정 field를 수정하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># location이 강남인 document의 Founded를 2010으로 설정</span>\n<span class=\"token operator\">></span> db.company.update<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span> location <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token variable\">$eq</span> <span class=\"token operator\">=</span> <span class=\"token string\">'강남'</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span> <span class=\"token variable\">$set</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> Founded <span class=\"token builtin class-name\">:</span> <span class=\"token number\">2010</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span> multi <span class=\"token builtin class-name\">:</span> true<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\nWriteResult<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"nMatched\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">2</span>, <span class=\"token string\">\"nUpserted\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span>, <span class=\"token string\">\"nModified\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"배열-에-값-추가하기\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EC%97%B4-%EC%97%90-%EA%B0%92-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"배열 에 값 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배열 에 값 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># test company document의 employees 배열에 \"김코코\" 추가</span>\n<span class=\"token operator\">></span> db.company.update<span class=\"token punctuation\">(</span>\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"test company\"</span> <span class=\"token punctuation\">}</span>,\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">{</span> <span class=\"token variable\">$push</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> employees: <span class=\"token string\">\"김코코\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">)</span>\nWriteResult<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"nMatched\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>, <span class=\"token string\">\"nUpserted\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span>, <span class=\"token string\">\"nModified\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"배열에-값-여러개-추가하기--오름차순으로-정렬하기\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EC%97%B4%EC%97%90-%EA%B0%92-%EC%97%AC%EB%9F%AC%EA%B0%9C-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0--%EC%98%A4%EB%A6%84%EC%B0%A8%EC%88%9C%EC%9C%BC%EB%A1%9C-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0\" aria-label=\"배열에 값 여러개 추가하기  오름차순으로 정렬하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배열에 값 여러개 추가하기 + 오름차순으로 정렬하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Charlie document의 employees에 \"사마의\" 와 \"미믹\" 을 추가하고 알파벳순으로 정렬</span>\n<span class=\"token operator\">></span> db.company.update<span class=\"token punctuation\">(</span>\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"test company\"</span> <span class=\"token punctuation\">}</span>,\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">{</span> <span class=\"token variable\">$push</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">..</span>.     employees: <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">..</span>.         <span class=\"token variable\">$each</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"사마의\"</span>, <span class=\"token string\">\"미믹\"</span> <span class=\"token punctuation\">]</span>,\n<span class=\"token punctuation\">..</span>.         <span class=\"token variable\">$sort</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>\n<span class=\"token punctuation\">..</span>.     <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>.   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">)</span>\nWriteResult<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"nMatched\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>, <span class=\"token string\">\"nUpserted\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span>, <span class=\"token string\">\"nModified\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>$sort 값을 내림차순으로 정렬하려면 -1 로 하면 된다.\n배열이 document의 배열이고 그 embedded document의 특정 field에 따라서 정렬을 할 때는 다음과 같이 설정하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token variable\">$sort</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> KEY: <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"배열에-값-제거하기\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EC%97%B4%EC%97%90-%EA%B0%92-%EC%A0%9C%EA%B1%B0%ED%95%98%EA%B8%B0\" aria-label=\"배열에 값 제거하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배열에 값 제거하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># test company document에서 employees 값의 미믹 제거</span>\n<span class=\"token operator\">></span> db.company.update<span class=\"token punctuation\">(</span>\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"test company\"</span> <span class=\"token punctuation\">}</span>,\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">{</span> <span class=\"token variable\">$pull</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> employees <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"미믹\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"배열에서-값-여러개-제거하기\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EC%97%B4%EC%97%90%EC%84%9C-%EA%B0%92-%EC%97%AC%EB%9F%AC%EA%B0%9C-%EC%A0%9C%EA%B1%B0%ED%95%98%EA%B8%B0\" aria-label=\"배열에서 값 여러개 제거하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배열에서 값 여러개 제거하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># test company document에서 employees 배열 중 \"사마의\" 와 \"김코코\" 제거</span>\n<span class=\"token operator\">></span> db.company.update<span class=\"token punctuation\">(</span>\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"test company\"</span> <span class=\"token punctuation\">}</span>,\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">{</span> <span class=\"token variable\">$pull</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span> employees: <span class=\"token punctuation\">{</span> <span class=\"token variable\">$in</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"사마의\"</span>, <span class=\"token string\">\"김코코\"</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">)</span>\nWriteResult<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"nMatched\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>, <span class=\"token string\">\"nUpserted\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span>, <span class=\"token string\">\"nModified\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>","fields":{"slug":"/posts/Mongo-DB-4","tagSlugs":["/tag/mongo-db/","/tag/til/"]},"frontmatter":{"date":"2020-06-11T23:00:00","description":"Mongo DB TIL 배운거 정리","tags":["Mongo DB","TIL"],"title":"Mongo DB 4 TIL","socialImage":""}}},"pageContext":{"slug":"/posts/Mongo-DB-4"}}}