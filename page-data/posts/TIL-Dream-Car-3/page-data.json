{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/TIL-Dream-Car-3","result":{"data":{"markdownRemark":{"id":"9b5c5d9a-8258-5eb3-ad45-8685be15df14","html":"<h1 id=\"우당탕탕-좌충우돌-dreamcar-project-3부\" style=\"position:relative;\"><a href=\"#%EC%9A%B0%EB%8B%B9%ED%83%95%ED%83%95-%EC%A2%8C%EC%B6%A9%EC%9A%B0%EB%8F%8C-dreamcar-project-3%EB%B6%80\" aria-label=\"우당탕탕 좌충우돌 dreamcar project 3부 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>우당탕탕 좌충우돌 DreamCar Project 3부</h1>\n<h2 id=\"5-viewspy의-작성\" style=\"position:relative;\"><a href=\"#5-viewspy%EC%9D%98-%EC%9E%91%EC%84%B1\" aria-label=\"5 viewspy의 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Views.py의 작성</h2>\n<p>우리가 만들어 놓은 app은 2개이다. Car와 Shopping이다.\n각각의 앱에는 다른 기능들이 들어가게된다.</p>\n<h3 id=\"car의-viewspy작성\" style=\"position:relative;\"><a href=\"#car%EC%9D%98-viewspy%EC%9E%91%EC%84%B1\" aria-label=\"car의 viewspy작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>car의 Views.py작성</h3>\n<p>Car 앱은 차량을 꾸미면 이미지를 보내주거나, 차량의 초기 기본 색상값을 보내주거나, 꾸민 차량을 저장하는 등 차량과 관련된 기능만을 모아 두었다.</p>\n<p>해당 앱의 Views의 처음부터 정리가 필요한것들만 기록을 해보도록하자.</p>\n<h3 id=\"1번째-기록\" style=\"position:relative;\"><a href=\"#1%EB%B2%88%EC%A7%B8-%EA%B8%B0%EB%A1%9D\" aria-label=\"1번째 기록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1번째 기록</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MainView</span><span class=\"token punctuation\">(</span>View<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">post</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n            data <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span>\n\n            model_version_line_id <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'mvl_id'</span><span class=\"token punctuation\">]</span>\n            exterior_id           <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'exterior'</span><span class=\"token punctuation\">]</span>\n            wheel_id\t         <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'wheel'</span><span class=\"token punctuation\">]</span>\n            caliper_id            <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'caliper'</span><span class=\"token punctuation\">]</span>\n            seat_id\t         <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'seat'</span><span class=\"token punctuation\">]</span>\n            dashboard_id          <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'dashboard'</span><span class=\"token punctuation\">]</span>\n            carpet_id             <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'carpet'</span><span class=\"token punctuation\">]</span>\n            steering_id           <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'steering'</span><span class=\"token punctuation\">]</span>\n\n            mvl       <span class=\"token operator\">=</span> ModelVersionLine<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span> <span class=\"token operator\">=</span> model_version_line_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>code\n            exterior  <span class=\"token operator\">=</span> ExteriorGroup<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'exterior'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wheel'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'caliper'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>exterior <span class=\"token operator\">=</span> exterior_id<span class=\"token punctuation\">,</span> wheel <span class=\"token operator\">=</span> wheel_id<span class=\"token punctuation\">,</span> caliper <span class=\"token operator\">=</span> caliper_id<span class=\"token punctuation\">)</span>\n            interior  <span class=\"token operator\">=</span> InteriorGroup<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'seat'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dashboard'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'carpet'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'steering'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>seat <span class=\"token operator\">=</span> seat_id<span class=\"token punctuation\">,</span> dashboard <span class=\"token operator\">=</span> dashboard_id<span class=\"token punctuation\">,</span> carpet <span class=\"token operator\">=</span> carpet_id<span class=\"token punctuation\">,</span> steering <span class=\"token operator\">=</span> steering_id<span class=\"token punctuation\">)</span>\n\n\n            exterior_url <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n             <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">'Exterior1'</span>  <span class=\"token punctuation\">:</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'https://ph.cloud.maserati.com/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>mvl<span class=\"token punctuation\">}</span></span><span class=\"token string\">/1280/c720/gfx6?config=background;shadow;CRPT/CRPT/94084217;INT/INT/94084310;BOE/Q136/INT/94084310;DUMMYOPTS/DOARM/94084281;DUMMYOPTS/DOPUH/94084282;TRIM/Q4MN;RUF/ROO1/94084295;DSH/DSHG/94084275;STEERINGWHEEL/STL1/94084213;BOE/Q5ZK;BOE/Q4B2;BOE/Q407;BOE/QAWS;FUS/Q410;CAL/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>caliper<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;RIMS/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>wheel<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;EXT/EXT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>exterior<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;MEC/Q5EM;glasses_front;MEC/Q400'</span></span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token string\">'Exterior2'</span>  <span class=\"token punctuation\">:</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'https://ph.cloud.maserati.com/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>mvl<span class=\"token punctuation\">}</span></span><span class=\"token string\">/1280/c720/gfx7?config=background;shadow;CRPT/CRPT/94084217;INT/INT/94084310;BOE/Q136/INT/94084310;DUMMYOPTS/DOARM/94084281;DUMMYOPTS/DOPUH/94084282;TRIM/Q4MN;RUF/ROO1/94084295;DSH/DSHG/94084275;STEERINGWHEEL/STL1/94084213;BOE/Q5ZK;BOE/Q4B2;BOE/Q407;BOE/QAWS;FUS/Q410;MEC/Q5EM;CAL/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>caliper<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;RIMS/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>wheel<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;EXT/EXT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>exterior<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;glasses_front;MEC/Q400;plates'</span></span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token string\">'Exterior3'</span>  <span class=\"token punctuation\">:</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'https://ph.cloud.maserati.com/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>mvl<span class=\"token punctuation\">}</span></span><span class=\"token string\">/1280/c720/gfx3?config=background;shadow;CRPT/CRPT/94084217;RUF/ROO1/94084295;INT/INT/94084310;BOE/Q136/INT/94084310;DUMMYOPTS/DOARM/94084281;DUMMYOPTS/DOPUH/94084282;TRIM/Q4MN;DSH/DSHG/94084275;STEERINGWHEEL/STL1/94084213;BOE/Q5ZK;BOE/Q4B2;BOE/Q407;BOE/QAWS;FUS/Q410;CAL/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>caliper<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;RIMS/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>wheel<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;EXT/EXT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>exterior<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;MEC/Q5EM;glasses_front;MEC/Q400'</span></span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token string\">'Exterior4'</span>  <span class=\"token punctuation\">:</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'https://ph.cloud.maserati.com/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>mvl<span class=\"token punctuation\">}</span></span><span class=\"token string\">/1280/c720/gfx5?config=background;shadow;CRPT/CRPT/94084217;RUF/ROO1/94084295;INT/INT/94084310;BOE/Q136/INT/94084310;DUMMYOPTS/DOARM/94084281;DUMMYOPTS/DOPUH/94084282;TRIM/Q4MN;DSH/DSHG/94084275;STEERINGWHEEL/STL1/94084213;BOE/Q5ZK;BOE/Q4B2;BOE/Q407;BOE/QAWS;FUS/Q410;CAL/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>caliper<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;RIMS/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>wheel<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;EXT/EXT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>exterior<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;MEC/Q5EM;glasses_front;MEC/Q400'</span></span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token string\">'interior1'</span>  <span class=\"token punctuation\">:</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'https://ph.cloud.maserati.com/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>mvl<span class=\"token punctuation\">}</span></span><span class=\"token string\">/1280/c720/gfx9?config=background;shadow;glasses_front;MEC/Q400;CRPT/CRPT/94084217;BOE/Q728/CRPT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>carpet<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;RUF/ROO1/94084295;INT/INT/94084213;DUMMYOPTS/DOARM/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span>code2<span class=\"token punctuation\">}</span></span><span class=\"token string\">;DUMMYOPTS/DOPUH/94084282;TRIM/Q4MN;DSH/DSHG/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span>code1<span class=\"token punctuation\">}</span></span><span class=\"token string\">;STEERINGWHEEL/STL1/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>steering<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;BOE/Q5ZK;BOE/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>seat<span class=\"token punctuation\">.</span>code2<span class=\"token punctuation\">}</span></span><span class=\"token string\">/INT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>seat<span class=\"token punctuation\">.</span>code1<span class=\"token punctuation\">}</span></span><span class=\"token string\">;BOE/Q4B2;BOE/Q407;BOE/QAWS;FUS/Q410;MEC/Q5EM;CAL/KMBC;RIMS/Q420;EXT/EXT/94084201'</span></span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token string\">'interior2'</span>  <span class=\"token punctuation\">:</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'https://ph.cloud.maserati.com/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>mvl<span class=\"token punctuation\">}</span></span><span class=\"token string\">/1280/c720/gfx10?config=background;shadow;glasses_front;MEC/Q400;CRPT/CRPT/94084217;RUF/ROO1/94084297;INT/INT/94084213;BOE/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>seat<span class=\"token punctuation\">.</span>code2<span class=\"token punctuation\">}</span></span><span class=\"token string\">/INT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>seat<span class=\"token punctuation\">.</span>code1<span class=\"token punctuation\">}</span></span><span class=\"token string\">;DUMMYOPTS/DOARM/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span>code1<span class=\"token punctuation\">}</span></span><span class=\"token string\">;DUMMYOPTS/DOPUH/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span>code2<span class=\"token punctuation\">}</span></span><span class=\"token string\">;TRIM/Q4MN;DSH/DSHG/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span>code2<span class=\"token punctuation\">}</span></span><span class=\"token string\">;STEERINGWHEEL/STL1/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>steering<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;BOE/Q5ZK;BOE/Q4B2;BOE/Q212;BOE/Q407;BOE/QAWS;FUS/Q410;MEC/Q5EM;CAL/KMBC;RIMS/Q420;EXT/EXT/94084201'</span></span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token string\">'interior3'</span>  <span class=\"token punctuation\">:</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'https://ph.cloud.maserati.com/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>mvl<span class=\"token punctuation\">}</span></span><span class=\"token string\">/1280/c720/gfx11?config=background;shadow;glasses_front;MEC/Q400;CRPT/CRPT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>carpet<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;RUF/ROO1/94084295;INT/INT/94084349;DUMMYOPTS/DOARM/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span>code2<span class=\"token punctuation\">}</span></span><span class=\"token string\">;DUMMYOPTS/DOPUH/94084282;TRIM/Q4MN;DSH/DSHG/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span>code1<span class=\"token punctuation\">}</span></span><span class=\"token string\">;STEERINGWHEEL/STL1/94084213;BOE/Q5ZK;BOE/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>seat<span class=\"token punctuation\">.</span>code2<span class=\"token punctuation\">}</span></span><span class=\"token string\">/INT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>seat<span class=\"token punctuation\">.</span>code1<span class=\"token punctuation\">}</span></span><span class=\"token string\">;BOE/Q4B2;BOE/Q407;BOE/QAWS;FUS/Q410;MEC/Q5EM;CAL/KMBC;RIMS/Q420;EXT/EXT/9408420'</span></span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token string\">'interior4'</span>  <span class=\"token punctuation\">:</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'https://ph.cloud.maserati.com/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>mvl<span class=\"token punctuation\">}</span></span><span class=\"token string\">/1280/c720/gfx12?config=background;shadow;CRPT/CRPT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>carpet<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;RUF/ROO1/94084296;INT/INT/94084213;BOE/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>seat<span class=\"token punctuation\">.</span>code2<span class=\"token punctuation\">}</span></span><span class=\"token string\">/INT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>seat<span class=\"token punctuation\">.</span>code1<span class=\"token punctuation\">}</span></span><span class=\"token string\">;DUMMYOPTS/DOARM/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span>code2<span class=\"token punctuation\">}</span></span><span class=\"token string\">;DUMMYOPTS/DOPUH/94084282;TRIM/Q4MN;DSH/DSHG/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span>code1<span class=\"token punctuation\">}</span></span><span class=\"token string\">;STEERINGWHEEL/STL1/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>interior<span class=\"token punctuation\">.</span>steering<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;BOE/Q5ZK;BOE/Q4B2;BOE/Q407;BOE/QAWS;FUS/Q410;MEC/Q5EM;CAL/KMBC;RIMS/Q420;EXT/EXT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>exterior<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;glasses_front;MEC/Q400'</span></span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token string\">'preview_url'</span><span class=\"token punctuation\">:</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'https://ph.cloud.maserati.com/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>mvl<span class=\"token punctuation\">}</span></span><span class=\"token string\">/400/c225/gfx6?config=background;shadow;CRPT/CRPT/94084217;INT/INT/94084310;BOE/Q136/INT/94084310;DUMMYOPTS/DOARM/94084281;DUMMYOPTS/DOPUH/94084282;TRIM/Q4MN;RUF/ROO1/94084295;DSH/DSHG/94084275;STEERINGWHEEL/STL1/94084213;BOE/Q5ZK;BOE/Q4B2;BOE/Q407;BOE/QAWS;FUS/Q410;CAL/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>caliper<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;RIMS/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>wheel<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;EXT/EXT/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>exterior<span class=\"token punctuation\">.</span>exterior<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">}</span></span><span class=\"token string\">;MEC/Q5EM;glasses_front;MEC/Q400'</span></span>\n              <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">]</span>\n            <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'rendering_url'</span><span class=\"token punctuation\">:</span> exterior_url<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> status <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">except</span> KeyError<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>status <span class=\"token operator\">=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">except</span> ObjectDoesNotExist<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>status <span class=\"token operator\">=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">image_format</span><span class=\"token punctuation\">(</span>image_name<span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#4</span>\n    formats <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token string\">'exterior'</span>  <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">'mvl'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'mvl'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'caliper_code'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'caliper_code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wheel_code'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'wheel_code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'exterior_code'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'exterior_code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n         <span class=\"token string\">'interior1'</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">'mvl'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'mvl'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'carpet_code'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'carpet_code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dashboard_code2'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'dashboard_code2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dashboard_code1'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'dashboard_code1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'steering_code'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'steering_code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'seat_code2'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'seat_code2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'seat_code1'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'seat_code1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n         <span class=\"token string\">'interior2'</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">'mvl'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'mvl'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'seat_code2'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'seat_code2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'seat_code1'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'seat_code1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dashboard_code1'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'dashboard_code1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dashboard_code2'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'dashboard_code2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'steering_code'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'steering_code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n         <span class=\"token string\">'interior3'</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">'mvl'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'mvl'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'carpet_code'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'carpet_code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'seat_code2'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'seat_code2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'seat_code1'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'seat_code1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dashboard_code1'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'dashboard_code1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dashboard_code2'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'dashboard_code2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n         <span class=\"token string\">'interior4'</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">'mvl'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'mvl'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'carpet_code'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'carpet_code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'seat_code2'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'seat_code2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'seat_code1'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'seat_code1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dashboard_code1'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'dashboard_code1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dashboard_code2'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'dashboard_code2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'steering_code'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'steering_code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'exterior_code'</span> <span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'exterior_code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> formats<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>image_name<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Invalid_name\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MainView</span><span class=\"token punctuation\">(</span>View<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n            mvl       <span class=\"token operator\">=</span> ModelVersionLine<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'mvl'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>code\n            exterior  <span class=\"token operator\">=</span> ExteriorGroup<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'exterior'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wheel'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'caliper'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>exterior <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'exterior'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> wheel <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'wheel'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> caliper <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'caliper'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            interior  <span class=\"token operator\">=</span> InteriorGroup<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'seat'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dashboard'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'carpet'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'steering'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>seat <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'seat'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> dashboard <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'dashboard'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> carpet <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'carpet'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> steering <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'steering'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token comment\">#1</span>\n            one_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n            one_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'mvl'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> mvl<span class=\"token punctuation\">;</span> one_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'caliper_code'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> exterior<span class=\"token punctuation\">.</span>caliper<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">;</span> one_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'wheel_code'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> exterior<span class=\"token punctuation\">.</span>wheel<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">;</span> one_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'exterior_code'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> exterior<span class=\"token punctuation\">.</span>exterior<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">;</span>\n            one_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'carpet_code'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> interior<span class=\"token punctuation\">.</span>carpet<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">;</span> one_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'dashboard_code1'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> interior<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span>code1<span class=\"token punctuation\">;</span> one_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'dashboard_code2'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> interior<span class=\"token punctuation\">.</span>dashboard<span class=\"token punctuation\">.</span>code2<span class=\"token punctuation\">;</span>\n            one_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'steering_code'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> interior<span class=\"token punctuation\">.</span>steering<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">;</span> one_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'seat_code1'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> interior<span class=\"token punctuation\">.</span>seat<span class=\"token punctuation\">.</span>code1<span class=\"token punctuation\">;</span> one_dict<span class=\"token punctuation\">[</span><span class=\"token string\">'seat_code2'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> interior<span class=\"token punctuation\">.</span>seat<span class=\"token punctuation\">.</span>code2\n\n            image_url <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> img_name<span class=\"token punctuation\">:</span> ImageUrl<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> img_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>image_url\n            <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token comment\">#2</span>\n            exterior_url <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n             <span class=\"token punctuation\">{</span>   <span class=\"token string\">'Exterior1'</span>  <span class=\"token punctuation\">:</span> image_url<span class=\"token punctuation\">(</span><span class=\"token string\">\"main_exterior1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>image_format<span class=\"token punctuation\">(</span><span class=\"token string\">'exterior'</span><span class=\"token punctuation\">,</span> one_dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">'Exterior2'</span>  <span class=\"token punctuation\">:</span> image_url<span class=\"token punctuation\">(</span><span class=\"token string\">\"main_exterior2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>image_format<span class=\"token punctuation\">(</span><span class=\"token string\">'exterior'</span><span class=\"token punctuation\">,</span> one_dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">'Exterior3'</span>  <span class=\"token punctuation\">:</span> image_url<span class=\"token punctuation\">(</span><span class=\"token string\">\"main_exterior3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>image_format<span class=\"token punctuation\">(</span><span class=\"token string\">'exterior'</span><span class=\"token punctuation\">,</span>one_dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">'Exterior4'</span>  <span class=\"token punctuation\">:</span> image_url<span class=\"token punctuation\">(</span><span class=\"token string\">\"main_exterior4\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>image_format<span class=\"token punctuation\">(</span><span class=\"token string\">'exterior'</span><span class=\"token punctuation\">,</span>one_dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">'Interior1'</span>  <span class=\"token punctuation\">:</span> image_url<span class=\"token punctuation\">(</span><span class=\"token string\">\"main_interior1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>image_format<span class=\"token punctuation\">(</span><span class=\"token string\">'interior1'</span><span class=\"token punctuation\">,</span>one_dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">'Interior2'</span>  <span class=\"token punctuation\">:</span> image_url<span class=\"token punctuation\">(</span><span class=\"token string\">\"main_interior2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>image_format<span class=\"token punctuation\">(</span><span class=\"token string\">'interior2'</span><span class=\"token punctuation\">,</span>one_dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">'Interior3'</span>  <span class=\"token punctuation\">:</span> image_url<span class=\"token punctuation\">(</span><span class=\"token string\">\"main_interior3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>image_format<span class=\"token punctuation\">(</span><span class=\"token string\">'interior3'</span><span class=\"token punctuation\">,</span>one_dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">'Interior4'</span>  <span class=\"token punctuation\">:</span> image_url<span class=\"token punctuation\">(</span><span class=\"token string\">\"main_interior4\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>image_format<span class=\"token punctuation\">(</span><span class=\"token string\">'interior4'</span><span class=\"token punctuation\">,</span>one_dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">'preview'</span>    <span class=\"token punctuation\">:</span> image_url<span class=\"token punctuation\">(</span><span class=\"token string\">\"main_preview_url\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>image_format<span class=\"token punctuation\">(</span><span class=\"token string\">'exterior'</span><span class=\"token punctuation\">,</span>one_dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">]</span>\n            <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'rendering_url'</span><span class=\"token punctuation\">:</span> exterior_url<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> status <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n            <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token comment\">#3</span>\n        <span class=\"token keyword\">except</span> KeyError<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>status <span class=\"token operator\">=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">except</span> ObjectDoesNotExist<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>status <span class=\"token operator\">=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위의 두 코드는 같은 기능을 하는 코드이다.\n사용자로 부터 옵션의 변경정보를 받으면 옵션이 적용된 이미지를 내보내주는 기능을 한다.</p>\n<p>첫번째 코드는 내가 처음에 작성했던 코드이다. 정말이지 원시적인 모습이 아닐 수가 없다.\n두번째 코드는 한번 리팩토링을 해서 어느정도 정리된 형태의 코드이다.\n같은 기능을 하는데도 가독성이 매우 차이가 나는 것을 확인할 수 있다.\n두 코드를 동시에 올려 놓은이유는 같은 기능을 하지만 고친 코드에서는 여러가지 방식이 쓰였기 때문에 차이가 눈에 보이기 쉽게 하기 위해서이다(<del>이거보여주려고 코드 다 썼다</del>).</p>\n<p>그럼 두번째 코드를 위주로 설명을 시작하겠다.</p>\n<p>일단 첫번째 함수 부분을 보기전에 <code class=\"language-text\">MainView</code>의 설명이 선행되어야 한다.</p>\n<p><code class=\"language-text\">MainView</code>를 천천히 보면 3부분으로 나눠 놓은것을 확인 할 수 있다.</p>\n<p>첫번째로 #1의 부분은 사용자로부터 차량의 옵션정보를 쿼리스트링으로 받아와서 그에 해당하는 코드를 불러오기 위해 미리 select_related캐시를 하는 부분이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">data <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span> <span class=\"token comment\">#Json으로 받을 때</span>\n\nrequest<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'mvl'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#쿼리 스트링으로 받을때</span></code></pre></div>\n<p>두번째 #2부분은 주소에 조합할 코드들을 모두 찾아와서 <code class=\"language-text\">one_dict</code>에 딕셔너리 형태로 저장하고, image_url을 DB에서 하나씩 불러와 사용하기 위해 lambda를 사용하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">image_url <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> img_name<span class=\"token punctuation\">:</span> ImageUrl<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> img_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>image_url\n\nimage_url<span class=\"token punctuation\">(</span><span class=\"token string\">\"main_exterior1\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>lambda를 변수에 저장하고 호출하면 호출시 전달한 내용을 파라메터로 받은뒤 해당 파라메터를 내용에 넣어서 반환한다. 여기서는 <code class=\"language-text\">img_name</code>이 파라메터로서 작동한다.\n<code class=\"language-text\">ImageUrl.objects.get(name = main_exterior1).image_url</code> 가 되는 것이다.</p>\n<p>세번째 #3부분은 이미지를 만들기 위한 부분이다.\n위에서 lambda를 통해 데이터베이스에서 이미지url(초기 형태의 코드에 url과 같다)을 불러온뒤 format을 이용해 해당 위치에 코드를 대입시키기 위함이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token string\">'Exterior1'</span>  <span class=\"token punctuation\">:</span> image_url<span class=\"token punctuation\">(</span><span class=\"token string\">\"main_exterior1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>image_format<span class=\"token punctuation\">(</span><span class=\"token string\">'exterior'</span><span class=\"token punctuation\">,</span> one_dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">.fromat()</code>을 보면 image_format함수를 호출하는데 **이 붙어있다. 이 경우에는 key, value 형태로 format을 할 수 있다. 그 내용은 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">Ho <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'name'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'숭기당권'</span><span class=\"token punctuation\">}</span>\nA <span class=\"token operator\">=</span> <span class=\"token string\">\"안녕하세요 {name} 님\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>Ho<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 출력 : 안녕하세요 숭기당권 님</span></code></pre></div>\n<p>그럼 이제 함수로 2개의 인자가 날아가게된다. <code class=\"language-text\">exterior</code>와 <code class=\"language-text\">one_dict</code>이다. exterior는 상황에 따라 쓰기위해 모아놓은 딕셔너리에서 exterior에 대한 코드가 담긴 value를 가져오기 위해 key값으로 쓰기위해 보내는 부분이고 one_dict는 코드 모음에 집합이다.</p>\n<p>이제 마지막으로 제일 처음 적어두었던 함수 <code class=\"language-text\">def image_format()</code> #4를 보게되면 인자로 받은 내용을 formats딕셔너리에서 key값을 get으로 가지고 와서 반환해주는 내용이다. 만약 일치하는 key가 없다면 <code class=\"language-text\">Invalid_name</code> 반환하게 된다.</p>\n<p>format 사용법을 더 보고 싶다면 <a href=\"https://pyformat.info/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">이곳</a>을 참고하면 좋다.</p>\n<h3 id=\"2번째-기록\" style=\"position:relative;\"><a href=\"#2%EB%B2%88%EC%A7%B8-%EA%B8%B0%EB%A1%9D\" aria-label=\"2번째 기록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2번째 기록</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">WheelView</span><span class=\"token punctuation\">(</span>View<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n     <span class=\"token keyword\">def</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> mvl_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        wheel    <span class=\"token operator\">=</span> Wheel<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'wheel_type'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>model_version_line <span class=\"token operator\">=</span> mvl_id<span class=\"token punctuation\">)</span>\n\n        wheel_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n             <span class=\"token punctuation\">{</span>\n                 <span class=\"token string\">'wheel_id'</span>      <span class=\"token punctuation\">:</span> thumb<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">'wheel_type'</span>    <span class=\"token punctuation\">:</span> thumb<span class=\"token punctuation\">.</span>wheel_type<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">'thumbnail_url'</span> <span class=\"token punctuation\">:</span> thumb<span class=\"token punctuation\">.</span>wheel_type<span class=\"token punctuation\">.</span>thumbnail_url\n             <span class=\"token punctuation\">}</span> <span class=\"token keyword\">for</span> thumb <span class=\"token keyword\">in</span> wheel\n        <span class=\"token punctuation\">]</span>\n\n        <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'wheel thumbnail'</span> <span class=\"token punctuation\">:</span> wheel_list<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> status <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>2번째로 남기고 싶은것은 for을 사용해 list에서 여러개의 딕셔너리를 만드는 것이다.\n예전에 수업에서 알려주었던것 같은데 까먹었다가 최근에 다시 기억이 났다. 까먹을까봐 다시 남겨둔다.</p>","fields":{"slug":"/posts/TIL-Dream-Car-3","tagSlugs":["/tag/project/","/tag/dream-car/","/tag/til/"]},"frontmatter":{"date":"2020-05-06T23:00:00","description":"Project 수행 후 필요한 것 정리","tags":["Project","DreamCar","TIL"],"title":"DreamCar Project 3부","socialImage":""}}},"pageContext":{"slug":"/posts/TIL-Dream-Car-3"}}}